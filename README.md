# Capstone Project / Manuel Jaraba
 
1. INTRODUCTION

The capstone will build upon the knowledge you have gained in the course in order to build a decentralized housing product. You will be minting your own tokens to represent your title to the real estate properties. Before you mint a token, you need to verify your own the property. You will use zk-SNARKs to create a verification system which can prove you have title to the property without revealing that specific information on the property. Once the token has been verified you will place it on a blockchain market place (OpenSea) for others to purchase. The detail steps of the project is as follows:

- building of the ERC 721 tokens for the real estate homes
- compiling and integrating zokrates into the tokens that is just built


STEPS I FOLLOWED

- Fill out ERC721 Mintable Contract in ERC721Mintable.sol
- Write test cases TestERC721Mintable.js
- Compile and pass test cases in TestERC721Mintable.js
- Implement Zokrates
- Deploy latest contracts generated by Zokrates
- Deploy SolnSquareVerifier contract to Rinkeby network
- Mint 10 tokens
- Generate OpenSea marketplace
- List 5 of your tokens on the marketplace
- Purchase those 5 tokens using a different address
- Complete documents requested
- Submit


2. VERSIONS
```
Truffle v5.5.3 (core: 5.5.3)
Ganache v7.0.1
Solidity - ^0.5.0 (solc-js)
Node v14.15.5
Web3.js v1.5.3
```

3. INSTALLATION STEPS
```
pm install -g truffle
npm install
cd eth-contracts/
truffle compile
```


4. IMPLEMENT ZOKRATES

STEP 1. COMPILE ZOKRATES

<img width="1091" alt="image" src="https://user-images.githubusercontent.com/88942202/157141519-d8d82650-2906-46e0-8afc-9746357f1298.png">

STEP 2. GENERATE THE TRUSTED SETUP
 
 <img width="1091" alt="image" src="https://user-images.githubusercontent.com/88942202/157141536-80ca23f9-153d-4a3c-9457-edb0a639cf1e.png">

STEP 3. COMPUTE WITNESS

 <img width="1091" alt="image" src="https://user-images.githubusercontent.com/88942202/157141548-886e8318-1fcf-4e29-9c50-a4c834ccbd28.png">

STEP 4. GENERATE PROOF

 <img width="1091" alt="image" src="https://user-images.githubusercontent.com/88942202/157141568-50bbea4d-b6da-4d72-97fe-793321deb93c.png">


STEP 5. EXPORT VERIFIER

 <img width="1091" alt="image" src="https://user-images.githubusercontent.com/88942202/157141580-a62ab5e2-4123-499d-9cd1-6108ab61f373.png">

5. MIGRATE SMART CONTRACTS TO GANACHE FOR TESTING

```
cd eth-contracts/
truffle migrate --reset
```


7. RUN TESTS

In order to run tests use the following command:
```
cd eth-contracts/
truffle test
```


8. DEPLOYING

Use the following command to deploy the contracts in the rinkeby network:

```
truffle migrate --network rinkeby --reset
```

My deployment is correct and it should look like this:

```
Compiling your contracts...
===========================
> Everything is up to date, there is nothing to compile.
Warning: Both truffle-config.js and truffle.js were found. Using truffle-config.js.


Starting migrations...
======================
> Network name:    'rinkeby'
> Network id:      4
> Block gas limit: 29970676 (0x1c950f4)


1_initial_migration.js
======================

   Replacing 'Migrations'
   ----------------------
   > transaction hash:    0x00bbbc32afa4ac91cb2d7fe7cf1b923c3c06d98979108b999de0667c889692c1
   > Blocks: 1            Seconds: 17
   > contract address:    0x77c9f2B3027b43fd05Dd6e6a29c3630A15181B59
   > block number:        10289624
   > block timestamp:     1646693336
   > account:             0x3229b351ac8012BF071B1b06B6447dF2564fCFBa
   > balance:             0.292931327120291939
   > gas used:            245936 (0x3c0b0)
   > gas price:           1.000000014 gwei
   > value sent:          0 ETH
   > total cost:          0.000245936003443104 ETH

   Pausing for 2 confirmations...

   -------------------------------
   > confirmation number: 1 (block: 10289625)
   > confirmation number: 2 (block: 10289626)
   > Saving migration to chain.
   > Saving artifacts
   -------------------------------------
   > Total cost:     0.000245936003443104 ETH


2_deploy_contracts.js
=====================

   Replacing 'Verifier'
   --------------------
   > transaction hash:    0x855df7fbdeaca9ac2ea1a1532db1a8d4f51d37f597ae931fc432352bd0289e95
   > Blocks: 1            Seconds: 9
   > contract address:    0x3411615891dEc2C0b6CE6302D2F1f6aA1768d527
   > block number:        10289628
   > block timestamp:     1646693396
   > account:             0x3229b351ac8012BF071B1b06B6447dF2564fCFBa
   > balance:             0.291840822101799128
   > gas used:            1044731 (0xff0fb)
   > gas price:           1.000000017 gwei
   > value sent:          0 ETH
   > total cost:          0.001044731017760427 ETH

   Pausing for 2 confirmations...

   -------------------------------
   > confirmation number: 1 (block: 10289629)
   > confirmation number: 2 (block: 10289630)

   Replacing 'SolnSquareVerifier'
   ------------------------------
   > transaction hash:    0xd20260d50261b453982fa4633f4b84c231a2698450f65caab1337cd2a00ced6a
   > Blocks: 3            Seconds: 52
   > contract address:    0xe215368ae8Be05670683eAf2cD39706AeA355a5b
   > block number:        10289634
   > block timestamp:     1646693486
   > account:             0x3229b351ac8012BF071B1b06B6447dF2564fCFBa
   > balance:             0.291840822101799128
   > gas used:            4794549 (0x4928b5)
   > gas price:           1.000000017 gwei
   > value sent:          0 ETH
   > total cost:          0.004794549081507333 ETH

   Pausing for 2 confirmations...

   -------------------------------
   > confirmation number: 1 (block: 10289635)
   > confirmation number: 2 (block: 10289636)
   > Saving migration to chain.
   > Saving artifacts
   -------------------------------------
   > Total cost:     0.00583928009926776 ETH

Summary
=======
> Total deployments:   3
> Final cost:          0.006085216102710864 ETH
![image](https://user-images.githubusercontent.com/88942202/157142208-9e91a90f-e688-41b5-a7ca-61ac8ddd4712.png)
```

DEPLOYED CONTRACT INFORMATION

Contract Address on Rinkeby Network

- Migrations	0xbc9d7Df93c36C50dcfd7Ad4F2cd1d63233e35E94
- Verifier	0x579E1C26e1BaF3BD0Ab2396b5BB14E110F876355
- SolnSquareVerifier	0x7968e940c8b66A7D9468752DFd8aAb1C75f395C6

Contract Abi's

Just open the ```\eth-contracts\build\contracts\SolnSquareVerifier.json``` file and get abi:

```
CONTRACT ABI:

[
    {
      "constant": false,
      "inputs": [
        {
          "name": "set",
          "type": "bool"
        }
      ],
      "name": "setter",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "interfaceId",
          "type": "bytes4"
        }
      ],
      "name": "supportsInterface",
      "outputs": [
        {
          "name": "",
          "type": "bool"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "name",
      "outputs": [
        {
          "name": "",
          "type": "string"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "tokenId",
          "type": "uint256"
        }
      ],
      "name": "getApproved",
      "outputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "to",
          "type": "address"
        },
        {
          "name": "tokenId",
          "type": "uint256"
        }
      ],
      "name": "approve",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "totalSupply",
      "outputs": [
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "from",
          "type": "address"
        },
        {
          "name": "to",
          "type": "address"
        },
        {
          "name": "tokenId",
          "type": "uint256"
        }
      ],
      "name": "transferFrom",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "_myid",
          "type": "bytes32"
        },
        {
          "name": "_result",
          "type": "string"
        }
      ],
      "name": "__callback",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "owner",
          "type": "address"
        },
        {
          "name": "index",
          "type": "uint256"
        }
      ],
      "name": "tokenOfOwnerByIndex",
      "outputs": [
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "_myid",
          "type": "bytes32"
        },
        {
          "name": "_result",
          "type": "string"
        },
        {
          "name": "_proof",
          "type": "bytes"
        }
      ],
      "name": "__callback",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [],
      "name": "unpause",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "to",
          "type": "address"
        },
        {
          "name": "tokenId",
          "type": "uint256"
        }
      ],
      "name": "mint",
      "outputs": [
        {
          "name": "",
          "type": "bool"
        }
      ],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "from",
          "type": "address"
        },
        {
          "name": "to",
          "type": "address"
        },
        {
          "name": "tokenId",
          "type": "uint256"
        }
      ],
      "name": "safeTransferFrom",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "index",
          "type": "uint256"
        }
      ],
      "name": "tokenByIndex",
      "outputs": [
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "tokenId",
          "type": "uint256"
        }
      ],
      "name": "ownerOf",
      "outputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "balanceOf",
      "outputs": [
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [],
      "name": "pause",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "getOwner",
      "outputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "symbol",
      "outputs": [
        {
          "name": "",
          "type": "string"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "to",
          "type": "address"
        },
        {
          "name": "approved",
          "type": "bool"
        }
      ],
      "name": "setApprovalForAll",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "_owner",
      "outputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "from",
          "type": "address"
        },
        {
          "name": "to",
          "type": "address"
        },
        {
          "name": "tokenId",
          "type": "uint256"
        },
        {
          "name": "_data",
          "type": "bytes"
        }
      ],
      "name": "safeTransferFrom",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "tokenId",
          "type": "uint256"
        }
      ],
      "name": "tokenURI",
      "outputs": [
        {
          "name": "",
          "type": "string"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "baseTokenURI",
      "outputs": [
        {
          "name": "",
          "type": "string"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "owner",
          "type": "address"
        },
        {
          "name": "operator",
          "type": "address"
        }
      ],
      "name": "isApprovedForAll",
      "outputs": [
        {
          "name": "",
          "type": "bool"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "name": "name",
          "type": "string"
        },
        {
          "name": "symbol",
          "type": "string"
        }
      ],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "index",
          "type": "uint256"
        },
        {
          "indexed": false,
          "name": "wallet",
          "type": "address"
        }
      ],
      "name": "SolutionAdded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "index",
          "type": "uint256"
        },
        {
          "indexed": false,
          "name": "wallet",
          "type": "address"
        }
      ],
      "name": "TokenMint",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "to",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "tokenId",
          "type": "uint256"
        }
      ],
      "name": "TokenMinted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "name": "from",
          "type": "address"
        },
        {
          "indexed": true,
          "name": "to",
          "type": "address"
        },
        {
          "indexed": true,
          "name": "tokenId",
          "type": "uint256"
        }
      ],
      "name": "Transfer",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": true,
          "name": "approved",
          "type": "address"
        },
        {
          "indexed": true,
          "name": "tokenId",
          "type": "uint256"
        }
      ],
      "name": "Approval",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": true,
          "name": "operator",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "approved",
          "type": "bool"
        }
      ],
      "name": "ApprovalForAll",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "account",
          "type": "address"
        }
      ],
      "name": "Paused",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "account",
          "type": "address"
        }
      ],
      "name": "Unpaused",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "OwnershipTransfered",
      "type": "event"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "index",
          "type": "uint256"
        },
        {
          "name": "wallet",
          "type": "address"
        }
      ],
      "name": "addSolution",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "a",
          "type": "uint256[2]"
        },
        {
          "name": "b",
          "type": "uint256[2][2]"
        },
        {
          "name": "c",
          "type": "uint256[2]"
        },
        {
          "name": "inputs",
          "type": "uint256[2]"
        },
        {
          "name": "index",
          "type": "uint256"
        },
        {
          "name": "wallet",
          "type": "address"
        }
      ],
      "name": "mintNFT",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ]
  ```

9. MINT TOKENS

In order tomind tokens I used myetherwallet.com

TO use this method we need to connect our wallet to the application and import the contract address from the deployment of the SolnSquare contract and also the ABI from the SolnSquareverifier.json file which can be found on the build folder after the deployment is completed. I used this guide which was very useful: https://www.youtube.com/watch?v=8MChn-NJJB0

  
  10. OPEN SEA MARKETPLACE

The goal of this project to create a decentralized house listing service. The real estate properties are represented by ERC721 tokens. We are using the zk-SNARKs toolbox from ZoKrates to establish a verification mechanism before minting each tokens. Finally, the tokens are listed and able for exchange on the blockchain market place OpenSea. On OpenSea, you can buy or sell any of these items through a smart contract, meaning that no central authority ever holds custody of your items.


OPNESEA MANUEL JARABA MARKETPLACE: https://testnets.opensea.io/collection/manuel-jaraba-mendez-token-v3


![image](https://user-images.githubusercontent.com/88942202/157143272-9cf4a9d9-768f-4de1-9100-c2dc8f891bb9.png)


TRANSACTION HASH LINK OF PURCHASE 1: https://rinkeby.etherscan.io/tx/0x34f31dc33018132b6a6c2b9448ff19e4c2087c36b11f8746f2b8e19ce514d38c
TRANSACTION HASH LINK OF PURCHASE 2: https://rinkeby.etherscan.io/tx/0x7e91af95946f3f225988741bf364663b3625a045d31c15ffbe5bf0d3c9031668
TRANSACTION HASH LINK OF PURCHASE 3: https://rinkeby.etherscan.io/tx/0x5af68aee57b0cea200d39ecfb3efb26c46fe8ed0322874087730aadb4133158d
TRANSACTION HASH LINK OF PURCHASE 4: https://rinkeby.etherscan.io/tx/0x6da6f77f9cc7a3563f52b7af1914f848b9bfacb7addd30d3807d9dd8512522de
TRANSACTION HASH LINK OF PURCHASE 5: https://rinkeby.etherscan.io/tx/0xd12a2a2777f6a8b22213acf7b54a6326f40a113c6a8cefdc17858fd7a0668f49

THE PROCESS OF BUYING WITH SCREENSHOTS

<img width="425" alt="image" src="https://user-images.githubusercontent.com/88942202/157145158-1d4d0a09-1911-4377-ba4b-e36302090ed5.png">

<img width="425" alt="image" src="https://user-images.githubusercontent.com/88942202/157145165-6d933e75-f368-4a9a-99a8-a47055bcc9de.png">

<img width="362" alt="image" src="https://user-images.githubusercontent.com/88942202/157145178-220a2c7a-143c-4163-b003-e9ca48ace7d8.png">

<img width="425" alt="image" src="https://user-images.githubusercontent.com/88942202/157145198-42fa28c1-94bd-4dc1-aa67-59bcc656aea7.png">


SUMMARY OF THE TRANSACTIONS BELOW

<img width="1091" alt="image" src="https://user-images.githubusercontent.com/88942202/157145059-47072e1d-56e5-4b4b-8597-1874a4282a18.png">


